## 量化入门

### tradingView


#### 1. 脚本的基本结构

指标: 必须包含至少一个在图表上生成输出的函数调用,例如`plot()`,`plotshape()`,`barcolor()`,`line.new()`

策略: 必须包含至少一个strategy.*()调用,例如`stragey.entry()`

简单总结:

- `指标`一定要在图表上画画,但是不能买入卖出

- `策略`一定要有买入或者卖出,但是也可以画画

> 看情况选择指标或者策略,不需要买卖数据的情况下选择指标


```
// 脚本 - 指标
// This Pine Script® code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// © lizhiyuan2023

//@version=6
indicator("我的脚本")
plot(close)
```

```
// 脚本 - 策略
// This Pine Script® code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// © lizhiyuan2023

//@version=6
strategy("我的策略", overlay=true, fill_orders_on_standard_ohlc = true)

longCondition = ta.crossover(ta.sma(close, 14), ta.sma(close, 28))
if (longCondition)
    strategy.entry("My Long Entry Id", strategy.long)

shortCondition = ta.crossunder(ta.sma(close, 14), ta.sma(close, 28))
if (shortCondition)
    strategy.entry("My Short Entry Id", strategy.short)
```

在`打开脚本`地方查看自己的指标和策略,制作完成后发布即可


#### 2. 函数

- 内置函数: Pine编辑器自带的可调用函数

- 自定义函数


```

// 内置函数示例
indicator("MACD2.0指标")
// 第一步计算出收盘价的ema12
ema12 = ta.ema(close,12)
// 第二步计算出收盘价的ema26
ema26 = ta.ema(close,26)
// 第三步计算出macd的值(ema12 - ema16)
fast = ema12 - ema26
// 第四步计算出macd的指数平均值
slow = ta.ema(fast,9)
// 第五步画出来
plot(fast) // 画出快线
plot(slow,color=color.green) // 画出慢线

```

```
// 内置函数的写法举例
// 带参数的标准写法
plot(series=close,title='收盘价',color=color.green)
// 不按顺序的标准写法
plot(title='收盘价',series=close,color=color.green)
// 可以省略可选参数
plot(series=close,color=color.green)
// 混合写法
plot(close,'收盘价',color=color.green)
```

**命名空间**

- 数学相关的函数math: `math.abs()`,`math.max()`,`math.random()`,`math.round_to_mintick()`

- 技术指标ta: `ta.sma()`,`ta.macd()`,`ta.rsi()`,`ta.supertrend()`等

- 其他交易品种或时间范围请求数据的函数: `request.dividends()`,`request.earnings()`,`request.financial()`,`request.quandl()`,`request.security()`,`request.splits()`














